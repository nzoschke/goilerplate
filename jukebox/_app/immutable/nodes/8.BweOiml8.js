import{f as m,a as v,c as Ne}from"../chunks/BFES40_V.js";import{o as Pe}from"../chunks/NJNdSpNe.js";import{p as Je,s as B,a as ee,x as Q,g as t,h as ae,t as T,b as Re,d as r,c as a,u as be,f as x,E as Ue,e as We,r as e,$ as Fe,n as Ge,F as xe}from"../chunks/BCx6sPza.js";import{d as Ke,e as ge,s as k}from"../chunks/Bb923Tjh.js";import{i as Oe}from"../chunks/Di618jlN.js";import{e as te,a as re,i as se,s as Ye}from"../chunks/C_qO7-x7.js";import{h as He,I as D,C as Ve,X as Ze,b as ea,B as aa}from"../chunks/CkC6-PcQ.js";import{A as ta}from"../chunks/C-rrEcMy.js";import{P as ra,A as sa,p as I,c as oa}from"../chunks/DrujSqhs.js";import{A as ia}from"../chunks/D_f8O-zr.js";import{a as la}from"../chunks/CiR3RtPb.js";import{S as na,M as ca,Q as da,A as va}from"../chunks/DAvMvPGz.js";const ua=N=>{var P=Xa();v(N,P)};var _a=m('<meta name="description" content="CD-100 Jukebox"/>'),fa=m('<label for="drawer"><!></label>'),pa=m('<div class="flex w-full justify-between font-mono text-4xl"><p> </p> <p> </p> <button> </button></div>'),ma=m("<div><!></div>"),ba=m('<div class="navbar min-h-20 bg-base-200 p-0"><div class="navbar-start w-32 p-2"><!></div> <div class="navbar-center flex grow justify-center"><!></div> <div class="navbar-end w-32 p-2"><!></div></div>'),xa=m('<div class="w-full truncate"><span class="font-mono font-bold"> </span> </div>'),ga=m('<div class="flex flex-1 flex-col overflow-hidden"><div class="flex"><div class="flex aspect-square size-12 items-center justify-center bg-black text-2xl font-bold text-white"> </div> <div class="ml-1 flex flex-col overflow-hidden"><p class="truncate font-bold"> </p> <p class="truncate"> </p></div></div> <div class="ml-1 overflow-scroll"></div></div> <img class="aspect-square max-w-[70%] object-cover object-center" alt="art"/>',1),ha=m('<div class="carousel-item size-full"><div class="carousel-item size-full"><div class="flex size-full flex-wrap"><div class="flex size-1/2 border-2"><!></div> <div class="flex size-1/2 flex-row-reverse border-2"><!></div> <div class="flex size-1/2 border-2"><!></div> <div class="flex size-1/2 flex-row-reverse border-2"><!></div></div></div></div>'),ka=m('<div id="carousel" class="carousel size-full"></div>'),wa=m('<button class="btn btn-square join-item font-mono text-xl"></button>'),ya=m('<div><button class="btn btn-square join-item"><!></button> <!> <button class="btn btn-square join-item"><!></button> <button class="btn btn-square join-item"><!></button></div>'),Xa=m("<div></div>"),za=m('<!> <div class="drawer"><input id="drawer" type="checkbox" class="drawer-toggle"/> <div class="drawer-content"><div class="flex h-screen w-screen flex-col"><!> <div class="flex flex-grow justify-end overflow-scroll"><div class="flex w-full flex-col overflow-scroll"><!></div> <!></div> <!> <!></div></div> <div class="drawer-side"><label for="drawer" aria-label="close menu" class="drawer-overlay"></label> <!></div></div>    <dialog id="enqueue" class="modal"><div class="modal-box text-center"><h3 class="pb-4 text-lg font-bold"> </h3> <p class="text-lg font-bold"> </p> <p> </p></div> <form method="dialog" class="modal-backdrop"><button>close</button></form></dialog>',1);function Da(N,P){Je(P,!0);const he=s=>{ca(s,{get playlist(){return n}})},ke=s=>{var o=ba();const b=p=>{var i=fa();let l;var h=a(i);D(h,{get src(){return aa},class:"size-5"}),e(i),T(()=>l=re(i,1,"btn btn-circle btn-ghost",null,l,{hidden:y.party})),v(p,i)},d=p=>{var i=pa(),l=a(i),h=a(l);e(l);var j=r(l,2),C=a(j);e(j);var $=r(j,2);$.__click=()=>{y.aside=!y.aside};var Y=a($);e($),e(i),T(M=>{k(h,`SELECT ${t(u)??""}`),k(C,`PLAYING ${n.playing??""}`),$.disabled=y.party,k(Y,`QUEUED ${M??""}`)},[()=>I(n.queue.length)]),v(p,i)},_=p=>{var i=ma();let l;var h=a(i);va(h,{}),e(i),T(()=>l=re(i,1,"",null,l,{hidden:y.party})),v(p,i)};var c=a(o),f=a(c);b(f),e(c);var X=r(c,2),z=a(X);d(z),e(X);var q=r(X,2),g=a(q);_(g),e(q),e(o),v(s,o)},we=s=>{var o=ka();const b=(d,_=xe,c=xe)=>{var f=Ne(),X=ae(f);{var z=g=>{},q=g=>{var p=ga(),i=ae(p),l=a(i),h=a(l),j=a(h,!0);e(h);var C=r(h,2),$=a(C),Y=a($,!0);e($);var M=r($,2),Ie=a(M,!0);e(M),e(C),e(l);var me=r(l,2);te(me,21,()=>c().tracks,se,(H,Le,Me,qa)=>{var V=xa(),Z=a(V),Be=a(Z,!0);e(Z);var Qe=r(Z);e(V),T(De=>{k(Be,De),k(Qe,` ${t(Le).title??""}`)},[()=>I(Me+1)]),v(H,V)}),e(me),e(i);var Se=r(i,2);T(H=>{k(j,H),k(Y,c().title),k(Ie,c().artist),Ye(Se,"src",c()?.art)},[()=>I(_())]),v(g,p)};Oe(X,g=>{c()?g(q,!1):g(z)})}v(d,f)};te(o,21,()=>oa(n.albums,4),se,(d,_,c)=>{var f=ha(),X=a(f),z=a(X),q=a(z),g=a(q);b(g,()=>c*4+0,()=>t(_)[0]),e(q);var p=r(q,2),i=a(p);b(i,()=>c*4+2,()=>t(_)[2]),e(p);var l=r(p,2),h=a(l);b(h,()=>c*4+1,()=>t(_)[1]),e(l);var j=r(l,2),C=a(j);b(C,()=>c*4+3,()=>t(_)[3]),e(j),e(z),e(X),e(f),v(d,f)}),e(o),ge("scrollend",o,({currentTarget:d})=>{x(A,Math.round(d.scrollLeft/d.clientWidth),!0)}),v(s,o)},ye=s=>{{let o=be(()=>!y.aside);da(s,{get playlist(){return n},get hidden(){return t(o)}})}},Xe=s=>{var o=ya();let b;var d=a(o);d.__click=()=>{S(-1)};var _=a(d);D(_,{get src(){return Ve},class:"size-5"}),e(d);var c=r(d,2);te(c,16,()=>Array(10),se,(g,p,i)=>{var l=wa();l.__click=()=>{L(i.toString())},l.textContent=i,v(g,l)});var f=r(c,2);f.__click=()=>{L("x")};var X=a(f);D(X,{get src(){return Ze},class:"size-5"}),e(f);var z=r(f,2);z.__click=()=>{S(1)};var q=a(z);D(q,{get src(){return ea},class:"size-5"}),e(z),e(o),T(()=>b=re(o,1,"join absolute bottom-1 flex w-full items-center justify-center",null,b,{hidden:y.physical})),v(s,o)},oe=ta(),n=ra(),ie=na();let w=B(ee(ia)),u=B("____"),J=setTimeout(()=>{},0),A=B(0);const R=be(()=>n.albums.length/4);let E=B(ee(sa)),y=ee({aside:!1,details:!1,party:!1,physical:!1,tab:"queue"});const S=s=>{x(A,t(A)+s),t(A)<0&&x(A,0),t(A)>=t(R)&&x(A,t(R)-1);const o=document.getElementById("carousel");o.scrollLeft=t(A)*(o.scrollWidth/t(R))},L=async s=>{if(clearTimeout(J),J=setTimeout(()=>{x(u,"____")},15*1e3),x(u,s=="x"?"____":t(u).replace("_",s),!0),t(u)=="XXXX"||t(u).indexOf("_")>=0)return;if(clearTimeout(J),setTimeout(()=>{x(u,"____")},1e3),t(u)=="9900"){y.party=!y.party;return}const o=parseInt(t(u).slice(0,2)),b=parseInt(t(u).slice(2,4))-1;if(b<0){x(u,"XXXX");return}const d=n.albums.at(o);if(!d){x(u,"XXXX");return}const _=d.tracks.at(b);if(!_){x(u,"XXXX");return}x(E,n.find({albumSrc:d.src,trackSrc:_.src}),!0),await n.enqueue(t(E));const c=document.getElementById("enqueue");c.showModal(),setTimeout(()=>{c.close()},2500)},ze=s=>{if(!s.metaKey)switch(y.physical=!0,s.key){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":L(s.key);break;case"Backspace":case".":case"x":L("x");break;case"ArrowLeft":case"Enter":case"-":case"/":S(-1);break;case"ArrowRight":case"+":case"*":S(1);break;case"a":n.skip(-1);break;case" ":case"s":t(w).paused=!t(w).paused;break;case"d":n.skip(1);break}};Pe(async()=>{await n.get(oe.token)}),Q(()=>{t(w).currentTime==0&&t(w).paused&&n.queue.length==1&&n.history.length==0&&(n.skip(1),t(w).paused=!1)}),Q(()=>{!t(w).paused&&n.queue.length==0&&n.history.length==0&&n.skip(1)}),Q(()=>{t(w).ended&&n.skip(1)}),Q(()=>{!t(w).paused&&ie.disabled===void 0&&(ie.disabled=!0)});var le=za();ge("keydown",Ue,ze),He("1mz4ixo",s=>{var o=_a();We(()=>{Fe.title="CD-100 Jukebox"}),v(s,o)});var ne=ae(le);la(ne,{get token(){return oe.token},get src(){return n.track.src},get audio(){return t(w)},set audio(s){x(w,s,!0)}});var U=r(ne,2),W=r(a(U),2),ce=a(W),de=a(ce);ke(de);var F=r(de,2),G=a(F),qe=a(G);we(qe),e(G);var Ae=r(G,2);ye(Ae),e(F);var ve=r(F,2);Xe(ve);var je=r(ve,2);ua(je),e(ce),e(W);var ue=r(W,2),$e=r(a(ue),2);he($e),e(ue),e(U);var _e=r(U,2),fe=a(_e),K=a(fe),Te=a(K);e(K);var O=r(K,2),Ee=a(O,!0);e(O);var pe=r(O,2),Ce=a(pe,!0);e(pe),e(fe),Ge(2),e(_e),T((s,o)=>{k(Te,`Queued ${s??""}${o??""}`),k(Ee,t(E).track.title),k(Ce,t(E).track.artist)},[()=>I(t(E).albumNum),()=>I(t(E).trackNum+1)]),v(N,le),Re()}Ke(["click"]);export{Da as component};

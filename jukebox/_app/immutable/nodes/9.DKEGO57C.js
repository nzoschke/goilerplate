const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/CKWIXq9V.js","../chunks/BFES40_V.js","../chunks/BCx6sPza.js","../chunks/DLdhjZ0R.js","../chunks/NJNdSpNe.js","../chunks/Di618jlN.js","../chunks/C_qO7-x7.js","../chunks/Bb923Tjh.js","../chunks/BRGnwOyr.js","../chunks/P4UWPmgh.js","../chunks/B-aHjxTS.js","../chunks/_wBXiEnh.js","../chunks/DAvMvPGz.js","../chunks/C-rrEcMy.js","../chunks/Blbuwriv.js","../chunks/CBiTOIEB.js","../chunks/BwMqE_kT.js","../chunks/BIzI8BF7.js","../chunks/CkC6-PcQ.js","../chunks/BqRHWynt.js","../assets/index.BpbVO-Ud.css"])))=>i.map(i=>d[i]);
import{_ as Ge,c as Ne}from"../chunks/BRGnwOyr.js";import{f as g,a as _,c as X}from"../chunks/BFES40_V.js";import{o as Oe}from"../chunks/NJNdSpNe.js";import{p as Re,s as be,a as Y,x as G,g as r,h as N,t as k,b as Fe,c as t,d as o,f as Z,e as Ke,r as e,u as C,n as Q,$ as Ue}from"../chunks/BCx6sPza.js";import{d as We,s as z}from"../chunks/Bb923Tjh.js";import{i as S}from"../chunks/Di618jlN.js";import{k as ge,T as Xe,P as Ye,a as Ze,g as ea,t as aa,b as ta,c as sa}from"../chunks/CJSBIwOb.js";import{a as w,s as j,b as ra,c as ia,e as fe,i as xe}from"../chunks/C_qO7-x7.js";import{h as oa,I as M,B as la,H as na,M as va,Q as ca,c as da,P as ua}from"../chunks/CkC6-PcQ.js";import{s as pa,a as he}from"../chunks/B-aHjxTS.js";import{A as ma}from"../chunks/C-rrEcMy.js";import{A as _a}from"../chunks/D_f8O-zr.js";import{a as ba,b as ga}from"../chunks/CiR3RtPb.js";import{S as fa,M as xa,A as ha,Q as ya}from"../chunks/DAvMvPGz.js";import{L as ka}from"../chunks/Cvo_6Mac.js";import{P as wa,A as ja}from"../chunks/DrujSqhs.js";var Pa=g('<meta name="description" content="Spotify Jukebox"/> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>',1),Aa=g('<div><div class="navbar-start"><label for="phone-drawer" class="btn btn-circle btn-ghost btn-sm"><!></label></div> <div class="navbar-center"><span class="text-lg font-bold">Jukebox</span></div> <div class="navbar-end"><!></div></div>'),$a=g('<button><figure><img class="aspect-square w-full object-cover"/></figure> <div class="card-body p-2"><p class="truncate text-sm font-semibold"> </p> <p class="truncate text-xs opacity-70"> </p></div></button>'),qa=g('<div class="flex h-full items-center justify-center"><span class="loading loading-spinner loading-lg"></span></div>'),Sa=g('<div class="h-full overflow-y-auto p-3"><div class="grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6"></div> <!></div>'),Ta=g('<button class="flex w-full items-center gap-3 px-4 py-3 active:bg-base-200"><div class="flex size-8 items-center justify-center rounded-full bg-primary text-primary-content"><!></div> <span class="min-w-6 text-sm opacity-50"></span> <span class="flex-1 truncate text-left"> </span></button>'),za=g('<div class="flex h-full justify-center"><div class="flex h-full w-full max-w-xl flex-col"><div><button class="btn btn-circle btn-ghost btn-sm">‚Üê</button> <div class="avatar"><div class="w-14 rounded"><img/></div></div> <div class="min-w-0 flex-1"><p class="truncate font-bold"> </p> <p class="truncate text-sm opacity-70"> </p></div></div> <div class="flex-1 overflow-y-auto"></div></div></div>'),Da=g('<div class="flex h-full justify-center"><!></div>'),Ia=g("<img/>"),La=g('<div><div class="avatar"><div class="w-12 rounded"><!></div></div> <div class="min-w-0 flex-1"><p class="truncate text-sm font-semibold"> </p> <p class="truncate text-xs opacity-70"> </p> <progress class="progress progress-primary h-1 w-full"></progress></div> <div class="shrink-0"><!></div></div>'),Ma=g('<div><button><!> <span class="text-xs">Albums</span></button> <button><!> <span class="text-xs">Tracks</span></button> <button><div class="indicator"><span> </span> <!></div> <span class="text-xs">Queue</span></button></div>'),Ca=g('<video autoplay playsinline="" loop class="svelte-24jteu"><source type="video/mp4"/></video>',2),Qa=g("<div><!></div>"),Va=g('<video autoplay playsinline="" loop class="svelte-24jteu"><source type="video/mp4;codecs=hvc1"/> <source type="video/webm"/></video>',2),Ha=g('<div class="backdrop svelte-24jteu"><!> <!></div>'),Ja=g('<div class="avatar shadow-lg"><div class="w-24 rounded-lg"><img alt=""/></div></div>'),Ba=g('<!> <!> <!> <div class="drawer bg-transparent"><input id="phone-drawer" type="checkbox" class="drawer-toggle"/> <div><!> <div class="flex-1 overflow-hidden"><!></div> <!> <!></div> <div class="drawer-side z-50"><label for="phone-drawer" aria-label="close menu" class="drawer-overlay"></label> <!></div> <!></div> <div><!> <div role="alert" class="alert alert-success shadow-lg"><!> <div class="overflow-hidden"><span class="truncate text-sm font-bold">Added to queue</span></div></div></div> <!>',1);function rt(ye,ke){Re(ke,!0);const O=()=>he(aa,"$theme",ee),V=()=>he(sa,"$anim",ee),[ee,we]=pa(),je=s=>{var a=Aa();let l;var v=t(a),p=t(v),n=t(p);M(n,{get src(){return la},class:"size-5"}),e(p),e(v);var i=o(v,4),c=t(i);ha(c,{path:"/spotify/phone"}),e(i),e(a),k(()=>l=w(a,1,"navbar min-h-14 bg-base-200 px-2",null,l,{"bg-opacity-40":r(D)})),_(s,a)},Pe=s=>{var a=Sa(),l=t(a);fe(l,21,()=>m.albums,xe,(n,i)=>{var c=$a();let b;c.__click=()=>{y.album=r(i),d.view="tracks"};var u=t(c),f=t(u);e(u);var P=o(u,2),x=t(P),q=t(x,!0);e(x);var A=o(x,2),I=t(A,!0);e(A),e(P),e(c),k(()=>{b=w(c,1,"card bg-base-200 shadow transition-transform active:scale-95",null,b,{"bg-opacity-40":r(D)}),j(f,"src",r(i).art),j(f,"alt",r(i).title),z(q,r(i).title),z(I,r(i).artist)}),_(n,c)}),e(l);var v=o(l,2);{var p=n=>{var i=qa();_(n,i)};S(v,n=>{m.albums.length===0&&n(p)})}e(a),_(s,a)},Ae=s=>{var a=za(),l=t(a),v=t(l);let p;var n=t(v);n.__click=()=>{d.view="albums"};var i=o(n,2),c=t(i),b=t(c);e(c),e(i);var u=o(i,2),f=t(u),P=t(f,!0);e(f);var x=o(f,2),q=t(x,!0);e(x),e(u),e(v);var A=o(v,2);fe(A,21,()=>y.album.tracks,xe,(I,$,L)=>{var E=Ta();E.__click=()=>{y.track=m.find({albumSrc:y.album.src,trackSrc:r($).src}),d.playDialog=!0};var W=t(E),Be=t(W);M(Be,{get src(){return ua},class:"size-4",solid:!0}),e(W);var me=o(W,2);me.textContent=L+1;var _e=o(me,2),Ee=t(_e,!0);e(_e),e(E),k(()=>z(Ee,r($).title)),_(I,E)}),e(A),e(l),e(a),k(()=>{p=w(v,1,"flex items-center gap-3 bg-base-200 p-3",null,p,{"bg-opacity-40":r(D)}),j(b,"src",y.album.art),j(b,"alt",y.album.title),z(P,y.album.title),z(q,y.album.artist)}),_(s,a)},$e=s=>{var a=Da(),l=t(a);ya(l,{get playlist(){return m},hidden:!1,class:"h-full w-full max-w-xl"}),e(a),_(s,a)},qe=s=>{const a=C(()=>{const{album:$,track:L}=m;return{album:$,track:L}});var l=La();let v;var p=t(l),n=t(p),i=t(n);{var c=$=>{var L=Ia();k(()=>{j(L,"src",r(a).album.art),j(L,"alt",r(a).album.title)}),_($,L)};S(i,$=>{r(a).album.art&&$(c)})}e(n),e(p);var b=o(p,2),u=t(b),f=t(u,!0);e(u);var P=o(u,2),x=t(P,!0);e(P);var q=o(P,2);e(b);var A=o(b,2),I=t(A);Ze(I,{get skip(){return m.skip},get audio(){return r(h)},set audio($){Z(h,$,!0)}}),e(A),e(l),k(()=>{v=w(l,1,"flex shrink-0 items-center gap-2 bg-base-200 p-2",null,v,{"bg-opacity-40":r(D),hidden:!r(a).track.title}),z(f,r(a).track.title),z(x,r(a).track.artist),j(q,"max",r(h).duration),ra(q,r(h).currentTime)}),_(s,l)},Se=s=>{var a=Ma();let l;var v=t(a);let p;v.__click=()=>{d.view="albums"};var n=t(v);M(n,{get src(){return na},class:"size-5"}),Q(2),e(v);var i=o(v,2);let c;i.__click=()=>{d.view="tracks"};var b=t(i);M(b,{get src(){return va},class:"size-5"}),Q(2),e(i);var u=o(i,2);let f;u.__click=()=>{d.view="queue"};var P=t(u),x=t(P);let q;var A=t(x,!0);e(x);var I=o(x,2);M(I,{get src(){return ca},class:"size-5"}),e(P),Q(2),e(u),e(a),k(()=>{l=w(a,1,"bottom-nav flex shrink-0 border-t border-base-300 bg-base-200 svelte-24jteu",null,l,{"bg-opacity-40":r(D)}),p=w(v,1,"flex flex-1 flex-col items-center justify-center py-2",null,p,{"text-primary":d.view==="albums"}),c=w(i,1,"flex flex-1 flex-col items-center justify-center py-2",null,c,{"text-primary":d.view==="tracks"}),f=w(u,1,"flex flex-1 flex-col items-center justify-center py-2",null,f,{"text-primary":d.view==="queue"}),q=w(x,1,"badge indicator-item badge-primary badge-xs",null,q,{hidden:!m.queue.length}),z(A,m.queue.length)}),_(s,a)},ae=ma(),Te=ka(),te=fa();let h=be(Y(_a)),m=wa(),y=Y({album:ga,track:ja}),d=Y({view:"albums",toast:!1,toastImage:"",playDialog:!1,theme:!1});const T=C(()=>ea(O())),se=C(()=>{let s=[];return r(T).backgroundColor&&s.push(`background-color: ${r(T).backgroundColor};`),r(T).backgroundGradient&&s.push(`background: url("https://assets.getpartiful.com/backgrounds/${O()}/web.mp4"), ${r(T).backgroundGradient};`),s.join(" ")}),D=C(()=>r(T).transparent),R=C(()=>ta(V()));let F=be(void 0);const ze=async s=>{m.enqueue(y.track,s),d.toast=!0,s?d.toastImage=s:d.toastImage="",setTimeout(()=>{d.toast=!1},3e3)};G(()=>{r(h).currentTime==0&&r(h).paused&&m.queue.length==1&&m.history.length==0&&(m.skip(1),r(h).paused=!1)}),G(()=>{!r(h).paused&&m.queue.length==0&&m.history.length==0&&m.skip(1)}),G(()=>{r(h).ended&&m.skip(1)}),G(()=>{!r(h).paused&&te.disabled===void 0&&(te.disabled=!0)}),Oe(async()=>{await m.get(ae.token,s=>{y.album=s}),y.album=m.albums[0];{const s=await Ge(()=>import("../chunks/CKWIXq9V.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]),import.meta.url);Z(F,s.LottiePlayer,!0)}});var re=Ba();oa("24jteu",s=>{var a=Pa();Q(2),Ke(()=>{Ue.title="Spotify Jukebox"}),_(s,a)});var ie=N(re);ba(ie,{get log(){return Te.log},get token(){return ae.token},get src(){return m.track.src},get audio(){return r(h)},set audio(s){Z(h,s,!0)}});var oe=o(ie,2);ge(oe,()=>r(se),s=>{var a=Qa(),l=t(a);{var v=p=>{var n=Ca();n.muted=!0;var i=t(n);e(n),k(()=>j(i,"src",`https://assets.getpartiful.com/backgrounds/${O()??""}/web.mp4`)),_(p,n)};S(l,p=>{r(T).animationStyle==="video"&&p(v)})}e(a),k(()=>{w(a,1,`backdrop ${r(T).backdropClass??""}`,"svelte-24jteu"),ia(a,r(se))}),_(s,a)});var le=o(oe,2);ge(le,()=>r(R),s=>{var a=Ha(),l=t(a);{var v=i=>{var c=Va();c.muted=!0;var b=t(c),u=o(b,2);e(c),k(()=>{j(b,"src",`https://assets.getpartiful.com/animations/${V()??""}/web.mov`),j(u,"src",`https://assets.getpartiful.com/animations/${V()??""}/web.webm`)}),_(i,c)};S(l,i=>{r(R).ext==="mp4"&&i(v)})}var p=o(l,2);{var n=i=>{var c=X(),b=N(c);Ne(b,()=>r(F),(u,f)=>{f(u,{get src(){return`https://assets.getpartiful.com/animations/${V()??""}/web.json`},autoplay:!0,loop:!0,renderer:"svg",background:"transparent",width:"100vw",height:"100vh"})}),_(i,c)};S(p,i=>{r(R)?.ext==="json"&&r(F)&&i(n)})}e(a),_(s,a)});var H=o(le,2),J=o(t(H),2);let ne;var ve=t(J);je(ve);var K=o(ve,2),De=t(K);{var Ie=s=>{Pe(s)},Le=s=>{var a=X(),l=N(a);{var v=n=>{Ae(n)},p=n=>{var i=X(),c=N(i);{var b=u=>{$e(u)};S(c,u=>{d.view==="queue"&&u(b)},!0)}_(n,i)};S(l,n=>{d.view==="tracks"?n(v):n(p,!1)},!0)}_(s,a)};S(De,s=>{d.view==="albums"?s(Ie):s(Le,!1)})}e(K);var ce=o(K,2);qe(ce);var Me=o(ce,2);Se(Me),e(J);var U=o(J,2),Ce=o(t(U),2);xa(Ce,{get playlist(){return m},onThemeClick:()=>d.theme=!0}),e(U);var Qe=o(U,2);Xe(Qe,{get open(){return d.theme},set open(s){d.theme=s}}),e(H);var B=o(H,2);let de;var ue=t(B);{var Ve=s=>{var a=Ja(),l=t(a),v=t(l);e(l),e(a),k(()=>j(v,"src",d.toastImage)),_(s,a)};S(ue,s=>{d.toastImage&&s(Ve)})}var pe=o(ue,2),He=t(pe);M(He,{get src(){return da},class:"size-5"}),Q(2),e(pe),e(B);var Je=o(B,2);Ye(Je,{get track(){return y.track},onPlay:ze,get open(){return d.playDialog},set open(s){d.playDialog=s}}),k(()=>{j(H,"data-theme",r(T).darkMode?"dark":"corporate"),ne=w(J,1,"drawer-content flex h-svh flex-col",null,ne,{"bg-base-100":!r(D),"bg-transparent":r(D)}),de=w(B,1,"toast toast-end toast-bottom z-50 mb-32",null,de,{hidden:!d.toast})}),_(ye,re),Fe(),we()}We(["click"]);export{rt as component};

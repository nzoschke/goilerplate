const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/CKWIXq9V.js","../chunks/BFES40_V.js","../chunks/BCx6sPza.js","../chunks/DLdhjZ0R.js","../chunks/NJNdSpNe.js","../chunks/Di618jlN.js","../chunks/C_qO7-x7.js","../chunks/Bb923Tjh.js","../chunks/BRGnwOyr.js","../chunks/P4UWPmgh.js","../chunks/B-aHjxTS.js","../chunks/_wBXiEnh.js","../chunks/DAvMvPGz.js","../chunks/C-rrEcMy.js","../chunks/Blbuwriv.js","../chunks/CBiTOIEB.js","../chunks/BwMqE_kT.js","../chunks/BIzI8BF7.js","../chunks/CkC6-PcQ.js","../chunks/BqRHWynt.js","../assets/index.BpbVO-Ud.css"])))=>i.map(i=>d[i]);
import{_ as Le,c as Me}from"../chunks/BRGnwOyr.js";import{f as b,a as u,c as At}from"../chunks/BFES40_V.js";import{o as Wt,a as qe}from"../chunks/NJNdSpNe.js";import{Y as Fe,P as We,be as De,as as Ne,e as be,j as Re,bf as Be,bg as Oe,bh as He,aM as pe,bi as Qe,ah as Ge,F as Pt,p as Et,s as gt,a as It,c as a,g as t,t as P,r as e,d as i,u as W,b as Lt,f as J,h as mt,x as kt,n as Ve,E as me,$ as Je}from"../chunks/BCx6sPza.js";import{b as Ke,s as B,d as he,e as Kt}from"../chunks/Bb923Tjh.js";import{i as ot}from"../chunks/Di618jlN.js";import{k as jt,g as Dt,t as Nt,T as Ue,P as Ye,a as Xe,b as Ze,c as ta}from"../chunks/CJSBIwOb.js";import{e as bt,s as tt,i as Tt,c as $t,a as Y,b as _e}from"../chunks/C_qO7-x7.js";import{I as it,i as ea,h as aa,C as ra,b as sa,c as ia,j as oa,k as na,l as la,m as ca,n as va,Q as da,B as ua,o as fa,P as ma}from"../chunks/CkC6-PcQ.js";import{s as Rt,a as zt,p as _a}from"../chunks/B-aHjxTS.js";import{A as ga}from"../chunks/C-rrEcMy.js";import{A as ba}from"../chunks/D_f8O-zr.js";import{a as pa,b as ha}from"../chunks/CiR3RtPb.js";import{S as xa,M as ya,Q as wa,A as ka}from"../chunks/DAvMvPGz.js";import{L as Ta}from"../chunks/Cvo_6Mac.js";import{s as Aa,c as Ia,p as Sa,P as Ca,A as Pa}from"../chunks/DrujSqhs.js";import"../chunks/Blbuwriv.js";const ja=()=>performance.now(),_t={tick:f=>requestAnimationFrame(f),now:()=>ja(),tasks:new Set};function xe(){const f=_t.now();_t.tasks.forEach(s=>{s.c(f)||(_t.tasks.delete(s),s.f())}),_t.tasks.size!==0&&_t.tick(xe)}function $a(f){let s;return _t.tasks.size===0&&_t.tick(xe),{promise:new Promise(w=>{_t.tasks.add(s={c:f,f:w})}),abort(){_t.tasks.delete(s)}}}function Ft(f,s){pe(()=>{f.dispatchEvent(new CustomEvent(s))})}function za(f){if(f==="float")return"cssFloat";if(f==="offset")return"cssOffset";if(f.startsWith("--"))return f;const s=f.split("-");return s.length===1?s[0]:s[0]+s.slice(1).map(w=>w[0].toUpperCase()+w.slice(1)).join("")}function ge(f){const s={},w=f.split(";");for(const _ of w){const[I,T]=_.split(":");if(!I||T===void 0)break;const j=za(I.trim());s[j]=T.trim()}return s}const Ea=f=>f;function ht(f,s,w,_){var I=(f&Oe)!==0,T=(f&He)!==0,j=I&&T,Q=(f&Be)!==0,X=j?"both":I?"in":"out",h,L=s.inert,S=s.style.overflow,x,$;function y(){return pe(()=>h??=w()(s,_?.()??{},{direction:X}))}var l={is_global:Q,in(){if(s.inert=L,!I){$?.abort(),$?.reset?.();return}T||x?.abort(),Ft(s,"introstart"),x=Ut(s,y(),$,1,()=>{Ft(s,"introend"),x?.abort(),x=h=void 0,s.style.overflow=S})},out(m){if(!T){m?.(),h=void 0;return}s.inert=!0,Ft(s,"outrostart"),$=Ut(s,y(),x,0,()=>{Ft(s,"outroend"),m?.()})},stop:()=>{x?.abort(),$?.abort()}},p=Fe;if((p.nodes.t??=[]).push(l),I&&Ke){var z=Q;if(!z){for(var n=p.parent;n&&(n.f&We)!==0;)for(;(n=n.parent)&&(n.f&De)===0;);z=!n||(n.f&Ne)!==0}z&&be(()=>{Re(()=>l.in())})}}function Ut(f,s,w,_,I){var T=_===1;if(Qe(s)){var j,Q=!1;return Ge(()=>{if(!Q){var p=s({direction:T?"in":"out"});j=Ut(f,p,w,_,I)}}),{abort:()=>{Q=!0,j?.abort()},deactivate:()=>j.deactivate(),reset:()=>j.reset(),t:()=>j.t()}}if(w?.deactivate(),!s?.duration)return I(),{abort:Pt,deactivate:Pt,reset:Pt,t:()=>_};const{delay:X=0,css:h,tick:L,easing:S=Ea}=s;var x=[];if(T&&w===void 0&&(L&&L(0,1),h)){var $=ge(h(0,1));x.push($,$)}var y=()=>1-_,l=f.animate(x,{duration:X,fill:"forwards"});return l.onfinish=()=>{l.cancel();var p=w?.t()??1-_;w?.abort();var z=_-p,n=s.duration*Math.abs(z),m=[];if(n>0){var r=!1;if(h)for(var d=Math.ceil(n/16.666666666666668),g=0;g<=d;g+=1){var k=p+z*S(g/d),E=ge(h(k,1-k));m.push(E),r||=E.overflow==="hidden"}r&&(f.style.overflow="hidden"),y=()=>{var c=l.currentTime;return p+z*S(c/n)},L&&$a(()=>{if(l.playState!=="running")return!1;var c=y();return L(c,1-c),!0})}l=f.animate(m,{duration:n,fill:"forwards"}),l.onfinish=()=>{y=()=>_,L?.(_,1-_),I()}},{abort:()=>{l&&(l.cancel(),l.effect=null,l.onfinish=Pt)},deactivate:()=>{I=Pt},reset:()=>{_===0&&L?.(1,0)},t:()=>y()}}const La=f=>f;function xt(f,{delay:s=0,duration:w=400,easing:_=La}={}){const I=+getComputedStyle(f).opacity;return{delay:s,duration:w,easing:_,css:T=>`opacity: ${T*I}`}}var Ma=b('<img class="aspect-square h-32 w-32 max-w-none" alt="art"/>'),qa=b('<div class="ml-1 flex animate-infinite-scroll items-center justify-center space-x-1 opacity-50"></div>'),Fa=b('<img class="aspect-square h-32 w-32 max-w-none" alt="art"/>'),Wa=b('<div class="ml-1 flex animate-infinite-scroll-reverse items-center justify-center space-x-1 opacity-50"></div>'),Da=b('<div class="w-[60vmin] rounded bg-white p-2 shadow-xl"><img class="aspect-square h-[60vmin] w-[60vmin] rounded" alt=""/> <p class="pt-2 italic"> <b> </b></p></div>'),Na=b('<h1 class="absolute bottom-20 left-1/2 -translate-x-1/2 transform text-center text-5xl font-bold"> </h1>'),Ra=b('<div class="flex h-screen w-screen flex-col items-center justify-center pb-20"><div class="inline-flex w-full flex-nowrap"></div> <div class="mt-1 inline-flex w-full flex-nowrap"></div> <div class="fixed inset-0 flex flex-col items-center justify-center pb-20"><!></div> <!></div>');function Ba(f,s){Et(s,!0);const w=()=>zt(Nt,"$theme",_),[_,I]=Rt();let T=gt(It([])),j=gt(It([]));const Q=W(()=>Dt(w()).themeColors?.link||""),X=()=>{const m=Aa([...s.playlist.albums]),r=Ia(m,Math.ceil(m.length/2));J(T,r[0],!0),J(j,r[1],!0)};Wt(()=>{X()});const h=W(()=>s.playlist.nowPlayingImage),L=W(()=>s.playlist.track.title),S=W(()=>s.playlist.track.artist);var x=Ra(),$=a(x);bt($,20,()=>[1,2],Tt,(m,r)=>{var d=qa();bt(d,21,()=>t(T),g=>g.src,(g,k)=>{var E=Ma();P(()=>tt(E,"src",t(k).art)),u(g,E)}),e(d),u(m,d)}),e($);var y=i($,2);bt(y,20,()=>[1,2],Tt,(m,r)=>{var d=Wa();bt(d,21,()=>t(j),g=>g.src,(g,k)=>{var E=Fa();P(()=>tt(E,"src",t(k).art)),u(g,E)}),e(d),u(m,d)}),e(y);var l=i(y,2),p=a(l);{var z=m=>{var r=Da(),d=a(r),g=i(d,2),k=a(g),E=i(k),c=a(E,!0);e(E),e(g),e(r),P(()=>{tt(d,"src",t(h)),B(k,`${t(L)??""} by `),B(c,t(S))}),u(m,r)};ot(p,m=>{t(h)!=""&&m(z)})}e(l);var n=i(l,2);jt(n,()=>s.message,m=>{var r=Na(),d=a(r,!0);e(r),P(()=>{$t(r,`color: ${t(Q)??""}`),B(d,s.message)}),ht(1,r,()=>xt,()=>({duration:400})),ht(2,r,()=>xt,()=>({duration:400})),u(m,r)}),e(x),u(f,x),Lt(),I()}var Oa=b('<div class="vinyl flex size-full h-[90vmin] w-[90vmin] animate-[spin_2s_linear_infinite] items-center justify-center rounded-full svelte-nf5ob2"><img class="h-2/3 w-2/3 svelte-nf5ob2" alt=""/></div> <p class="absolute bottom-5 left-5 pt-2 text-xl italic"> <b> </b></p>',1),Ha=b('<h1 class="glow absolute left-1/2 top-1/2 mt-[32vmin] -translate-x-1/2 transform text-center text-4xl font-bold text-base-content"> </h1>'),Qa=b('<div class="flex h-screen w-screen items-center justify-center"><!> <!></div>');function Ga(f,s){Et(s,!0);const w=()=>zt(Nt,"$theme",_),[_,I]=Rt(),T=W(()=>Dt(w())),j=W(()=>`color: white; text-shadow: ${[t(T).themeColors?.gradient1||"#fff",t(T).themeColors?.gradient2||"#fff",t(T).themeColors?.gradient3||"#ff00ff",t(T).themeColors?.gradient4||"#ff00ff",t(T).themeColors?.gradient5||"#ff00ff"].map((p,z)=>`0 0 ${10+z*10}px ${p}`).join(", ")};`),Q=W(()=>s.playlist.nowPlayingImage),X=W(()=>s.playlist.track.title),h=W(()=>s.playlist.track.artist);var L=Qa(),S=a(L);{var x=y=>{var l=Oa(),p=mt(l),z=a(p);e(p);var n=i(p,2),m=a(n),r=i(m),d=a(r,!0);e(r),e(n),P(()=>{tt(z,"src",t(Q)),B(m,`${t(X)??""} by `),B(d,t(h))}),u(y,l)};ot(S,y=>{t(Q)!=""&&y(x)})}var $=i(S,2);jt($,()=>s.message,y=>{var l=Ha(),p=a(l,!0);e(l),P(()=>{$t(l,t(j)),B(p,s.message)}),ht(1,l,()=>xt,()=>({duration:400})),ht(2,l,()=>xt,()=>({duration:400})),u(y,l)}),e(L),u(f,L),Lt(),I()}var Va=b('<h1 class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 transform text-center text-4xl font-bold text-base-content"> </h1>'),Ja=b('<img alt="" class="absolute"/>'),Ka=b('<div class="flex h-screen w-screen items-center justify-center"><!> <!> <p class="absolute bottom-5 left-5 pt-2 text-xl italic"> <b> </b></p></div>');function Ua(f,s){Et(s,!0);const w=()=>zt(Nt,"$theme",_),[_,I]=Rt(),T=W(()=>Dt(w()).themeColors?.link||""),j=W(()=>s.playlist.nowPlayingImage),Q=W(()=>s.playlist.track.title),X=W(()=>s.playlist.track.artist),h=window.innerWidth/5,L=2;let S=gt(It([]));kt(()=>{if(t(j)&&(t(S).length===0||t(S)[0].art!==t(j))){const d=window.innerWidth,g=window.innerHeight,k=Math.random()<.5?L:-L,E=Math.random()<.5?L:-L,c=k>0?-h:Math.random()*(d+h),dt=E>0?-h:Math.random()*(g+h);J(S,[{art:t(j),x:c,y:dt,vx:k,vy:E,inside:!1},...t(S)],!0)}});let x;Wt(()=>x=requestAnimationFrame($)),qe(()=>cancelAnimationFrame(x));function $(){const d=window.innerWidth,g=window.innerHeight;let k=[];for(const[E,c]of t(S).entries())c.x+=c.vx,c.y+=c.vy,E===0?(c.inside||(c.inside=c.x>=0&&c.x+h<=d&&c.y>=0&&c.y+h<=g),c.inside&&((c.x<0||c.x+h>d)&&(c.vx=-c.vx),(c.y<0||c.y+h>g)&&(c.vy=-c.vy))):(c.x<-h||c.x>d+h||c.y<-h||c.y>g+h)&&k.push(E);J(S,t(S).filter((E,c)=>!k.includes(c)),!0),x=requestAnimationFrame($)}var y=Ka(),l=a(y);jt(l,()=>s.message,d=>{var g=Va(),k=a(g,!0);e(g),P(()=>{$t(g,`color: ${t(T)??""}`),B(k,s.message)}),ht(1,g,()=>xt,()=>({duration:400})),ht(2,g,()=>xt,()=>({duration:400})),u(d,g)});var p=i(l,2);bt(p,17,()=>t(S),d=>d.art,(d,g)=>{var k=Ja();P(()=>{tt(k,"src",t(g).art),$t(k,`width: ${h}px; height: ${h}px; left: ${t(g).x??""}px; top: ${t(g).y??""}px;`)}),u(d,k)});var z=i(p,2),n=a(z),m=i(n),r=a(m,!0);e(m),e(z),e(y),P(()=>{B(n,`${t(Q)??""} by `),B(r,t(X))}),u(f,y),Lt(),I()}var Ya=b('<div role="button" aria-label="Close attract screen" tabindex="0" class="flex h-screen w-screen flex-col items-center justify-center"><h1 class="absolute right-5 top-5 text-5xl text-neutral"> </h1> <!> <button class="btn btn-circle btn-neutral absolute bottom-5 right-5"><!></button></div>');function Xa(f,s){Et(s,!0);let w=_a(s,"visible",15,!1),_=gt("default");const I=["Welcome to JukeLab","Press any key to continue","Tap anywhere to start","Select your favorite tunes"];let T=gt(0);const j=W(()=>I[t(T)]);Wt(()=>{const S=setInterval(()=>{J(T,(t(T)+1)%I.length)},5e3);return()=>clearInterval(S)});const Q=()=>w(!1);var X=At(),h=mt(X);{var L=S=>{var x=Ya();x.__click=Q,x.__keydown=Q;var $=a(x),y=a($);e($);var l=i($,2);{var p=r=>{Ba(r,{get playlist(){return s.playlist},get message(){return t(j)}})},z=r=>{var d=At(),g=mt(d);{var k=c=>{Ga(c,{get playlist(){return s.playlist},get message(){return t(j)}})},E=c=>{var dt=At(),pt=mt(dt);{var Bt=St=>{Ua(St,{get playlist(){return s.playlist},get message(){return t(j)}})};ot(pt,St=>{t(_)==="dvd"&&St(Bt)},!0)}u(c,dt)};ot(g,c=>{t(_)==="vinyl"?c(k):c(E,!1)},!0)}u(r,d)};ot(l,r=>{t(_)==="default"?r(p):r(z,!1)})}var n=i(l,2);n.__click=r=>{r.stopPropagation(),t(_)==="default"?J(_,"vinyl"):t(_)==="vinyl"?J(_,"dvd"):J(_,"default")};var m=a(n);it(m,{get src(){return ea},solid:!0,"aria-label":"Toggle Attract screen",role:"img",class:"h-5 w-5"}),e(n),e(x),P(r=>B(y,`Queue: ${r??""}`),[()=>Sa(s.playlist.queue.length)]),ht(1,x,()=>xt),ht(2,x,()=>xt),u(S,x)};ot(h,S=>{w()&&S(L)})}u(f,X),Lt()}he(["click","keydown"]);var Za=b('<meta name="description" content="Spotify Jukebox"/>'),tr=b('<button aria-label="exit" class="btn btn-circle btn-link"></button>'),er=b('<label for="drawer" class="btn btn-circle btn-ghost"><!></label>'),ar=b('<img class="size-full" alt=""/>'),rr=b('<div class="relative"><div><div class="avatar size-16"><div class="rounded"><!></div></div> <div class="flex grow flex-col items-center justify-center overflow-hidden"><div class="w-full overflow-hidden text-center"><p class="truncate"> </p> <p class="truncate"> </p></div></div> <div class="size-16 min-w-16"></div></div> <progress class="progress progress-primary absolute bottom-0 h-1"></progress></div>'),sr=b('<div class="navbar min-h-20 p-0"><div class="navbar-start w-32 p-2"><!></div> <div class="navbar-center flex grow justify-center"><!></div> <div class="navbar-end w-32 p-2"><!></div></div>'),ir=b('<div class="carousel-item w-[20vh]"><button><div><figure class="relative size-full"><img class="aspect-square object-cover object-center" alt="art"/> <div class="btn btn-circle btn-accent absolute bottom-0 right-0 m-2 hidden items-center group-hover:flex"><!></div></figure> <div class="card-body w-full gap-0 p-2 text-left"><p class="truncate"> </p> <p class="truncate text-sm font-bold"> </p></div></div></button></div>'),or=b('<button aria-label="page"></button>'),nr=b('<button class="group flex h-10 w-full items-center gap-2 p-2 hover:bg-base-300 hover:text-primary"><!> <span class="truncate text-left"> </span></button>'),lr=b('<div class="flex h-full flex-col"><div></div> <div id="carousel" class="carousel carousel-center relative w-full"></div> <div class="flex w-full items-center justify-between px-1"><button><!></button> <!> <button><!></button></div> <div class="flex flex-1 justify-center overflow-scroll"><div><div class="grid w-full grid-cols-1 content-start"></div></div></div></div>'),cr=b('<button class="btn btn-circle btn-ghost"><!></button> <button class="btn btn-circle btn-ghost"><!></button> <button class="btn btn-circle btn-ghost"><!></button> <button class="btn btn-circle btn-ghost"><!></button> <button class="btn btn-circle btn-ghost"><!></button>',1),vr=b('<div class="indicator"><span> </span> <button class="btn btn-circle btn-ghost"><!></button></div>'),dr=b('<div><progress></progress> <div class="navbar-start w-48 p-2"><!></div> <div class="navbar-center flex grow justify-center"><!></div> <div class="navbar-end w-48 p-2"><!></div></div>'),ur=b('<pre data-prefix=">"><code> </code></pre>'),fr=b("<div><div></div></div>"),mr=b('<video autoplay playsinline="" loop class="svelte-h70s1u"><source type="video/mp4"/></video>',2),_r=b("<div><!></div>"),gr=b('<video autoplay playsinline="" loop class="svelte-h70s1u"><source type="video/mp4;codecs=hvc1"/> <source type="video/webm"/></video>',2),br=b('<div class="backdrop svelte-h70s1u"><!> <!></div>'),pr=b('<div class="avatar shadow-lg"><div class="rounded-2xl"><img alt="Music taker" style="width: 358px; height: 358px;"/></div></div>'),hr=b('<!> <!> <div class="drawer bg-transparent"><input id="drawer" type="checkbox" class="drawer-toggle"/> <div class="drawer-content" role="button" tabindex="0"><div class="flex h-svh w-svw flex-col"><!> <div class="flex flex-grow justify-end overflow-scroll"><div class="flex w-full flex-col overflow-scroll"><!></div> <!></div> <!> <!></div></div> <div class="drawer-side"><label for="drawer" aria-label="close menu" class="drawer-overlay"></label> <!></div> <!> <!></div> <!>    <div><!> <div role="alert" class="alert shadow-lg"><!> <div class="w-72 overflow-hidden"><h3 class="truncate font-bold"> </h3> <div class="truncate text-xs"> </div></div></div></div> <!>',1);function Fr(f,s){Et(s,!0);const w=()=>zt(Nt,"$theme",I),_=()=>zt(ta,"$anim",I),[I,T]=Rt(),j=o=>{ya(o,{get playlist(){return n}})},Q=o=>{var v=sr();const D=nt=>{var V=At(),rt=mt(V);{var Z=M=>{var A=tr();A.__click=()=>{r.full=!1},u(M,A)},R=M=>{var A=er(),H=a(A);it(H,{get src(){return ua},class:"size-5"}),e(A),u(M,A)};ot(rt,M=>{r.full?M(Z):M(R,!1)})}u(nt,V)},K=nt=>{const V=W(()=>{const{album:vt,track:wt}=n;return{album:vt,track:wt}});var rt=rr(),Z=a(rt);let R;var M=a(Z),A=a(M),H=a(A);{var U=vt=>{var wt=ar();P(()=>tt(wt,"src",t(V).album.art)),u(vt,wt)};ot(H,vt=>{t(V).album.art!=""&&vt(U)})}e(A),e(M);var F=i(M,2),N=a(F),lt=a(N),st=a(lt,!0);e(lt);var ut=i(lt,2),ft=a(ut);e(ut),e(N),e(F),Ve(2),e(Z);var yt=i(Z,2);e(rt),P(vt=>{R=Y(Z,1,"flex size-full space-x-2 rounded border bg-base-200 md:w-[32rem]",null,R,{"bg-opacity-40":t(k)}),B(st,t(V).track.title),B(ft,`${t(V).track.album??""}
              ${vt??""}`),tt(yt,"max",t(l).duration),_e(yt,t(l).currentTime)},[()=>t(V).track.year?.getTime()==0?"":`(${t(V).track.year?.getFullYear()})`]),u(nt,rt)},G=nt=>{var V=At(),rt=mt(V);{var Z=R=>{ka(R,{})};ot(rt,R=>{r.full||R(Z)})}u(nt,V)};var O=a(v),C=a(O);D(C),e(O);var q=i(O,2),et=a(q);K(et),e(q);var at=i(q,2),ct=a(at);G(ct),e(at),e(v),u(o,v)},X=o=>{var v=lr(),D=a(v);let K;var G=i(D,2);bt(G,21,()=>n.albums,Tt,(A,H,U)=>{var F=ir(),N=a(F);let lt;N.__click=()=>{m.album=t(H),Bt(U)};var st=a(N);let ut;var ft=a(st),yt=a(ft),vt=i(yt,2),wt=a(vt);it(wt,{get src(){return fa},class:"size-6",solid:!0}),e(vt),e(ft);var ue=i(ft,2),Jt=a(ue),ze=a(Jt,!0);e(Jt);var fe=i(Jt,2),Ee=a(fe,!0);e(fe),e(ue),e(st),e(N),e(F),P(()=>{lt=Y(N,1,"group w-full border-b-4 border-transparent",null,lt,{"border-accent":t(H)==m.album}),ut=Y(st,1,"card w-full rounded-sm bg-base-100",null,ut,{"bg-opacity-40":t(k)}),tt(yt,"src",t(H)?.art),B(ze,t(H).title),B(Ee,t(H).artist)}),u(A,F)}),e(G);var O=i(G,2),C=a(O);let q;C.__click=()=>pt(-1);var et=a(C);it(et,{get src(){return ra},class:"size-4",solid:!0}),e(C);var at=i(C,2);bt(at,17,()=>Array(t(z)),Tt,(A,H,U)=>{var F=or();let N;F.__click=()=>pt(U-t(p)),P(()=>N=Y(F,1,"h-2 w-2 rounded-full bg-base-content hover:bg-base-300",null,N,{"bg-opacity-20":U!=t(p)})),u(A,F)});var ct=i(at,2);let nt;ct.__click=()=>pt(1);var V=a(ct);it(V,{get src(){return sa},class:"size-4",solid:!0}),e(ct),e(O);var rt=i(O,2),Z=a(rt);let R;var M=a(Z);bt(M,21,()=>m.album.tracks,Tt,(A,H,U)=>{var F=nr();F.__click=()=>{m.track=n.find({albumSrc:m.album.src,trackSrc:t(H).src}),r.playDialog=!0};var N=a(F);it(N,{get src(){return ma},class:"size-4 shrink-0 text-base-content group-hover:text-primary",solid:!0});var lt=i(N);lt.nodeValue=` ${U+1}. `;var st=i(lt),ut=a(st,!0);e(st),e(F),P(()=>B(ut,t(H).title)),u(A,F)}),e(M),e(Z),e(rt),e(v),P(()=>{K=Y(D,1,"skeleton h-[20vh] w-full",null,K,{hidden:n.albums.length>0}),q=Y(C,1,"btn join-item btn-sm rounded",null,q,{"bg-opacity-50":t(k)}),nt=Y(ct,1,"btn join-item btn-sm rounded",null,nt,{"bg-opacity-50":t(k)}),R=Y(Z,1,"mb-3 mt-1 flex w-full justify-center overflow-scroll rounded bg-base-100 shadow-xl md:w-[32rem]",null,R,{"bg-opacity-40":t(k)})}),Kt("scrollend",G,({currentTarget:A})=>{J(p,Math.round(A.scrollLeft/A.clientWidth),!0)}),u(o,v)},h=o=>{{let v=W(()=>!r.aside);wa(o,{get playlist(){return n},get hidden(){return t(v)}})}},L=o=>{const v=W(()=>{const{progress:R}=n;return{progress:R}});var D=dr();const K=R=>{var M=cr(),A=mt(M);A.__click=()=>{r.full=!r.full};var H=a(A);it(H,{get src(){return oa},class:"size-5",get solid(){return r.full}}),e(A);var U=i(A,2);U.__click=()=>{y.disabled=!y.disabled};var F=a(U);it(F,{get src(){return na},class:"size-5",get solid(){return y.disabled}}),e(U);var N=i(U,2);N.__click=()=>{r.attract=!r.attract};var lt=a(N);it(lt,{get src(){return la},class:"size-5",get solid(){return r.attract}}),e(N);var st=i(N,2);st.__click=()=>{r.theme=!r.theme};var ut=a(st);it(ut,{get src(){return ca},class:"size-5",get solid(){return r.theme}}),e(st);var ft=i(st,2);ft.__click=()=>{r.details=!r.details};var yt=a(ft);it(yt,{get src(){return va},class:"size-5",get solid(){return r.details}}),e(ft),u(R,M)},G=R=>{Xe(R,{get skip(){return n.skip},get audio(){return t(l)},set audio(M){J(l,M,!0)}})},O=R=>{var M=vr(),A=a(M);let H;var U=a(A,!0);e(A);var F=i(A,2);F.__click=()=>{r.aside=!r.aside};var N=a(F);it(N,{get src(){return da},class:"size-5",get solid(){return r.aside}}),e(F),e(M),P(()=>{H=Y(A,1,"badge indicator-item badge-neutral badge-sm z-0 mr-2 mt-2",null,H,{hidden:!n.queue.length}),B(U,n.queue.length)}),u(R,M)};let C;var q=a(D);let et;var at=i(q,2),ct=a(at);K(ct),e(at);var nt=i(at,2),V=a(nt);G(V),e(nt);var rt=i(nt,2),Z=a(rt);O(Z),e(rt),e(D),P(()=>{C=Y(D,1,"navbar relative min-h-20 bg-base-100 p-0",null,C,{"bg-opacity-20":t(d).transparent,hidden:r.full}),et=Y(q,1,"progress progress-primary absolute -top-1 h-1",null,et,{hidden:t(v).progress.value==t(v).progress.max}),tt(q,"max",t(v).progress.max),_e(q,t(v).progress.value)}),u(o,D)},S=o=>{var v=fr();let D;var K=a(v);bt(K,21,()=>$.logs,Tt,(G,O)=>{var C=ur(),q=a(C),et=a(q,!0);e(q),e(C),P(()=>{Y(C,1,`text-${t(O).level}`,"svelte-h70s1u"),B(et,t(O).msg)}),u(G,C)}),e(K),e(v),P(()=>D=Y(v,1,"flex h-24 min-h-24 flex-col-reverse overflow-scroll bg-black p-2 text-xs text-neutral-content",null,D,{hidden:!r.details})),u(o,v)},x=ga(),$=Ta(),y=xa();let l=gt(It(ba)),p=gt(0),z=gt(1),n=Ca(),m=It({album:ha,track:Pa}),r=It({aside:!1,attract:!1,details:!1,full:!1,playDialog:!1,portrait:!1,theme:!1,toast:!1,toastImage:""});const d=W(()=>Dt(w())),g=W(()=>{let o=[];return t(d).backgroundColor&&o.push(`background-color: ${t(d).backgroundColor};`),t(d).backgroundGradient&&o.push(`background: url("https://assets.getpartiful.com/backgrounds/${w()}/web.mp4"), ${t(d).backgroundGradient};`),o.join(" ")}),k=W(()=>t(d).transparent),E=W(()=>Ze(_()));let c=setTimeout(()=>{},0);const dt=()=>{r.attract=!1,clearTimeout(c),c=setTimeout(()=>{r.attract=!0},3e4)},pt=o=>{const v=document.getElementById("carousel");J(z,Math.round(v.scrollWidth/v.clientWidth),!0),J(p,t(p)+o),t(p)<0&&J(p,0),t(p)>=t(z)&&J(p,t(z)-1),v.scrollLeft=t(p)*(v.scrollWidth/t(z))},Bt=o=>{const v=document.getElementById("carousel");v.scrollLeft=v.scrollWidth/n.albums.length*o-v.clientWidth/2},St=o=>{r.full&&o.preventDefault()},ye=o=>{if(dt(),!o.metaKey)switch(o.key){case"ArrowLeft":case"Enter":case"-":case"/":pt(-1);break;case"ArrowRight":case"+":case"*":pt(1);break}},Yt=()=>{r.portrait=screen.orientation.type.includes("portrait")},we=async o=>{n.enqueue(m.track,o),r.toast=!0,o?r.toastImage=o:r.toastImage="",setTimeout(()=>{r.toast=!1},5e3)};kt(()=>{t(l).currentTime==0&&t(l).paused&&n.queue.length==1&&n.history.length==0&&(n.skip(1),t(l).paused=!1)}),kt(()=>{!t(l).paused&&n.queue.length==0&&n.history.length==0&&n.skip(1)}),kt(()=>{t(l).ended&&n.skip(1)}),kt(()=>{!t(l).paused&&y.disabled===void 0&&(y.disabled=!0)}),kt(()=>{r.attract||dt()});let Ot=gt(void 0);Wt(async()=>{Yt(),screen.orientation.addEventListener("change",Yt),await n.get(x.token,o=>{m.album=o}),m.album=n.albums[0],pt(0);{const o=await Le(()=>import("../chunks/CKWIXq9V.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]),import.meta.url);J(Ot,o.LottiePlayer,!0)}});var Xt=hr();Kt("keydown",me,ye),Kt("contextmenu",me,St),aa("h70s1u",o=>{var v=Za();be(()=>{Je.title="Spotify Jukebox"}),u(o,v)});var Zt=mt(Xt);pa(Zt,{get log(){return $.log},get token(){return x.token},get src(){return n.track.src},get audio(){return t(l)},set audio(o){J(l,o,!0)}});var te=i(Zt,2);jt(te,()=>t(g),o=>{var v=_r(),D=a(v);{var K=G=>{var O=mr(),C=a(O);e(O),P(()=>tt(C,"src",`https://assets.getpartiful.com/backgrounds/${w()??""}/web.mp4`)),u(G,O)};ot(D,G=>{t(d).animationStyle==="video"&&G(K)})}e(v),P(()=>{Y(v,1,`backdrop ${t(d).backdropClass??""}`,"svelte-h70s1u"),$t(v,t(g))}),u(o,v)});var Mt=i(te,2),Ct=i(a(Mt),2);Ct.__mousemove=()=>{dt()},Ct.__touchstart=()=>{dt()};var ee=a(Ct),ae=a(ee);Q(ae);var Ht=i(ae,2),Qt=a(Ht),ke=a(Qt);X(ke),e(Qt);var Te=i(Qt,2);h(Te),e(Ht);var re=i(Ht,2);L(re);var Ae=i(re,2);S(Ae),e(ee),e(Ct);var Gt=i(Ct,2),Ie=i(a(Gt),2);j(Ie),e(Gt);var se=i(Gt,2);Xa(se,{get playlist(){return n},get visible(){return r.attract},set visible(o){r.attract=o}});var Se=i(se,2);Ue(Se,{get open(){return r.theme},set open(o){r.theme=o}}),e(Mt);var ie=i(Mt,2);jt(ie,()=>t(E),o=>{var v=br(),D=a(v);{var K=C=>{var q=gr(),et=a(q),at=i(et,2);e(q),P(()=>{tt(et,"src",`https://assets.getpartiful.com/animations/${_()??""}/web.mov`),tt(at,"src",`https://assets.getpartiful.com/animations/${_()??""}/web.webm`)}),u(C,q)};ot(D,C=>{t(E).ext==="mp4"&&C(K)})}var G=i(D,2);{var O=C=>{var q=At(),et=mt(q);Me(et,()=>t(Ot),(at,ct)=>{ct(at,{get src(){return`https://assets.getpartiful.com/animations/${_()??""}/web.json`},autoplay:!0,loop:!0,renderer:"svg",background:"transparent",width:"100vw",height:"100vh"})}),u(C,q)};ot(G,C=>{t(E)?.ext==="json"&&t(Ot)&&C(O)})}e(v),u(o,v)});var qt=i(ie,2);let oe;var ne=a(qt);{var Ce=o=>{var v=pr(),D=a(v),K=a(D);e(D),e(v),P(()=>tt(K,"src",r.toastImage)),u(o,v)};ot(ne,o=>{r.toastImage&&o(Ce)})}var le=i(ne,2),ce=a(le);it(ce,{get src(){return ia},class:"size-5"});var ve=i(ce,2),Vt=a(ve),Pe=a(Vt,!0);e(Vt);var de=i(Vt,2),je=a(de,!0);e(de),e(ve),e(le),e(qt);var $e=i(qt,2);Ye($e,{get track(){return m.track},onPlay:we,get open(){return r.playDialog},set open(o){r.playDialog=o}}),P(()=>{tt(Mt,"data-theme",t(d).darkMode?"dark":"corporate"),oe=Y(qt,1,"toast z-10",null,oe,{hidden:!r.toast}),B(Pe,m.track.track.title),B(je,m.track.track.artist)}),u(f,Xt),Lt(),T()}he(["click","mousemove","touchstart"]);export{Fr as component};

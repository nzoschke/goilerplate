import{b as r}from"./Blbuwriv.js";import{h as s}from"./CBiTOIEB.js";import{s as i,g as c,r as u,S as l}from"./BwMqE_kT.js";const p="576b29fb8dd149f294aac649f2b156d6",d=()=>{let o;const e=()=>{if(!o){const a=`${window.location.origin}${r}/auth/callback`;o=l.withUserAuthorization(p,a,["app-remote-control","streaming","user-modify-playback-state","user-read-currently-playing","user-read-email","user-read-playback-state","user-read-private"])}return o};return{exchange:async()=>{if(!(await e().authenticate()).authenticated)return"auth user not found?";const t="spotify:href",n=c(t,s("/spotify/desktop"));u(t),window.location.href=n},login:async a=>{i("spotify:href",s(a)),await e().authenticate()},logout:async()=>{e().logOut(),window.location.reload()},token:async()=>(await e().getAccessToken())?.access_token||"",user:async()=>{if(!await e().getAccessToken())return f;const t=await e().currentUser.profile();return{email:t.email,id:t.id,image:t.images[0]?.url||"",name:t.display_name||""}}}},f={email:"",id:"",image:"",name:""},I=()=>d();export{I as A,f as I};

import{b as r}from"./DWDWkhsn.js";import{h as s}from"./BYGNl5ZI.js";import{s as i,g as c,r as u,S as l}from"./BwMqE_kT.js";const p=()=>{let o;const e=()=>{if(!o){const a=`${window.location.origin}${r}/auth/callback`;o=l.withUserAuthorization(void 0,a,["app-remote-control","streaming","user-modify-playback-state","user-read-currently-playing","user-read-email","user-read-playback-state","user-read-private"])}return o};return{exchange:async()=>{if(!(await e().authenticate()).authenticated)return"auth user not found?";const t="spotify:href",n=c(t,s("/spotify/desktop"));u(t),window.location.href=n},login:async a=>{i("spotify:href",s(a)),await e().authenticate()},logout:async()=>{e().logOut(),window.location.reload()},token:async()=>(await e().getAccessToken())?.access_token||"",user:async()=>{if(!await e().getAccessToken())return m;const t=await e().currentUser.profile();return{email:t.email,id:t.id,image:t.images[0]?.url||"",name:t.display_name||""}}}},m={email:"",id:"",image:"",name:""},b=()=>p();export{b as A,m as I};

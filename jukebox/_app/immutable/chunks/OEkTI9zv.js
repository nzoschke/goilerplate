import{h as s}from"./CWWj2PZd.js";import{S as n,s as r,g as c,r as i}from"./BwMqE_kT.js";const u="576b29fb8dd149f294aac649f2b156d6",l="http://127.0.0.1:8080/jukebox",p=()=>{const e=n.withUserAuthorization(u,`${l}/auth/callback`,["app-remote-control","streaming","user-modify-playback-state","user-read-currently-playing","user-read-email","user-read-playback-state","user-read-private"]);return{exchange:async()=>{if(!(await e.authenticate()).authenticated)return"auth user not found?";const t="spotify:href",o=c(t,s("/spotify/desktop"));i(t),window.location.href=o},login:async a=>{r("spotify:href",s(a)),await e.authenticate()},logout:async()=>{e.logOut(),window.location.reload()},token:async()=>(await e.getAccessToken())?.access_token||"",user:async()=>{if(!await e.getAccessToken())return d;const t=await e.currentUser.profile();return{email:t.email,id:t.id,image:t.images[0]?.url||"",name:t.display_name||""}}}},d={email:"",id:"",image:"",name:""},I=()=>p();export{I as A,d as I};
